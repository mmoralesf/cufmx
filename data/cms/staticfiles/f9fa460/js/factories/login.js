define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!common/templates/components/system-feedback.underscore",[],function(){return'<div class="wrapper wrapper-<%= type %> wrapper-<%= type %>-<%= intent %>\n            <% if(obj.shown) { %>is-shown<% } else { %>is-hiding<% } %>\n            <% if(_.contains([\'help\', \'mini\'], intent)) { %>wrapper-<%= type %>-status<% } %>"\n     id="<%= type %>-<%= intent %>"\n     aria-hidden="<% if(obj.shown) { %>false<% } else { %>true<% } %>"\n     aria-labelledby="<%= type %>-<%= intent %>-title"\n     tabindex="-1"\n     <% if (obj.message) { %>aria-describedby="<%= type %>-<%= intent %>-description" <% } %>\n     <% if (obj.actions) { %>role="dialog"<% } %>\n  >\n  <div class="<%= type %> <%= intent %> <% if(obj.actions) { %>has-actions<% } %>">\n    <% if(obj.icon) { %>\n      <% var iconClass = {"warning": "warning", "confirmation": "check", "error": "warning", "announcement": "bullhorn", "step-required": "exclamation-circle", "help": "question", "mini": "cog"} %>\n      <span class="feedback-symbol fa fa-<%= iconClass[intent] %>" aria-hidden="true"></span>\n    <% } %>\n\n    <div class="copy">\n      <h2 class="title title-3" id="<%= type %>-<%= intent %>-title"><%- title %></h2>\n      <% if(obj.message) { %><p class="message" id="<%= type %>-<%= intent %>-description"><%- message %></p><% } %>\n    </div>\n\n    <% if(obj.actions) { %>\n    <nav class="nav-actions">\n      <ul>\n        <% if(actions.primary) { %>\n        <li class="nav-item">\n          <button class="action-primary <%= actions.primary.class %>"><%- actions.primary.text %></button>\n        </li>\n        <% } %>\n        <% if(actions.secondary) {\n             _.each(actions.secondary, function(secondary) { %>\n        <li class="nav-item">\n          <button class="action-secondary <%= secondary.class %>"><%- secondary.text %></button>\n        </li>\n        <%   });\n           } %>\n      </ul>\n    </nav>\n    <% } %>\n\n    <% if(obj.closeIcon) { %>\n    <a href="#" rel="view" class="action action-close action-<%= type %>-close">\n      <span class="icon fa fa-times-circle" aria-hidden="true"></span>\n      <span class="label">close <%= type %></span>\n    </a>\n    <% } %>\n  </div>\n</div>\n'}),function(e){"use strict";e("common/js/components/views/feedback",["jquery","underscore","underscore.string","backbone","edx-ui-toolkit/js/utils/html-utils","text!../../../../common/templates/components/system-feedback.underscore"],function(e,n,t,i,o,s){var r=["a[href]:not([tabindex='-1'])","area[href]:not([tabindex='-1'])","input:not([disabled]):not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","iframe:not([tabindex='-1'])","[tabindex]:not([tabindex='-1'])","[contentEditable=true]:not([tabindex='-1'])"],a=i.View.extend({options:{title:"",message:"",intent:null,type:null,shown:!0,icon:!0,closeIcon:!0,minShown:0,maxShown:1/0,outFocusElement:null},initialize:function(t){if(this.options=n.extend({},this.options,t),!this.options.type)throw"SystemFeedback: type required (given "+JSON.stringify(this.options)+")";if(!this.options.intent)throw"SystemFeedback: intent required (given "+JSON.stringify(this.options)+")";return this.setElement(e("#page-"+this.options.type)),this.options.actions&&this.options.actions.secondary&&!n.isArray(this.options.actions.secondary)&&(this.options.actions.secondary=[this.options.actions.secondary]),this},inFocus:function(e){var n,t=e||".wrapper";return this.options.outFocusElement=this.options.outFocusElement||document.activeElement,this.$(t).first().focus(),n=this.$(r.join()),n.on("keydown",function(e){9===e.which&&e.shiftKey&&e.target===n.first()[0]?(e.preventDefault(),n.last().focus()):9!==e.which||e.shiftKey||e.target!==n.last()[0]||(e.preventDefault(),n.first().focus())}),this},outFocus:function(){return this.$(r.join()).off("keydown"),this.options.outFocusElement&&this.options.outFocusElement.focus(),this},show:function(){return clearTimeout(this.hideTimeout),this.options.shown=!0,this.shownAt=new Date,this.render(),e.isNumeric(this.options.maxShown)&&(this.hideTimeout=setTimeout(n.bind(this.hide,this),this.options.maxShown)),this},hide:function(){return this.shownAt&&e.isNumeric(this.options.minShown)&&this.options.minShown>new Date-this.shownAt?(clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(n.bind(this.hide,this),this.options.minShown-(new Date-this.shownAt))):(this.options.shown=!1,delete this.shownAt,this.render()),this},events:{"click .action-close":"hide","click .action-primary":"primaryClick","click .action-secondary":"secondaryClick"},render:function(){var e=a["active_"+this.options.type];return e&&e!==this&&(e.stopListening(),e.undelegateEvents()),o.setHtml(this.$el,o.template(s)(this.options)),a["active_"+this.options.type]=this,this},primaryClick:function(e){var n,t;n=this.options.actions,n&&(t=n.primary,t&&(t.preventDefault!==!1&&e.preventDefault(),t.click&&t.click.call(e.target,this,e)))},secondaryClick:function(e){var t,i,o,s;t=this.options.actions,t&&(i=t.secondary,i&&(s=0,e&&e.target&&(s=n.indexOf(this.$(".action-secondary"),e.target)),o=i[s],o.preventDefault!==!1&&e.preventDefault(),o.click&&o.click.call(e.target,this,e)))}});return a})}.call(this,define||RequireJS.define),function(e){"use strict";e("common/js/components/views/feedback_notification",["jquery","underscore","underscore.string","./feedback"],function(e,n,t,i){var o,s,r,a=i.extend({options:e.extend({},i.prototype.options,{type:"notification",closeIcon:!1})});return o=n.compose(t.capitalize,t.camelize),s=["warning","error","confirmation","announcement","step-required","help","mini"],n.each(s,function(n){var t;t=a.extend({options:e.extend({},a.prototype.options,{intent:n})}),a[o(n)]=t}),r=a.Mini.prototype.options,r.minShown=1250,r.closeIcon=!1,a})}.call(this,define||RequireJS.define),function(e){"use strict";e("common/js/components/views/feedback_prompt",["jquery","underscore","underscore.string","common/js/components/views/feedback"],function(e,n,t,i){var o,s,r=i.extend({options:e.extend({},i.prototype.options,{type:"prompt",closeIcon:!1,icon:!1}),render:function(){return window.$body||(window.$body=e(document.body)),this.options.shown?$body.addClass("prompt-is-shown"):$body.removeClass("prompt-is-shown"),i.prototype.render.apply(this,arguments)},show:function(){return i.prototype.show.apply(this,arguments),this.inFocus()},hide:function(){return i.prototype.hide.apply(this,arguments),this.outFocus()}});return o=n.compose(t.capitalize,t.camelize),s=["warning","error","confirmation","announcement","step-required","help","mini"],n.each(s,function(n){var t;t=r.extend({options:e.extend({},r.prototype.options,{intent:n})}),r[o(n)]=t}),r})}.call(this,define||RequireJS.define),function(e,n){"use strict";e("common/js/components/utils/view_utils",["jquery","underscore","gettext","common/js/components/views/feedback_notification","common/js/components/views/feedback_prompt"],function(e,t,i,o,s){var r,a,c,l,d,u,p,h,f,m,y,w,g,v,b,x,k,j,C,S=65;return r=function(e,n){n||(n="collapsed"),e.closest(".expand-collapse").toggleClass("expand collapse"),e.closest(".is-collapsible, .window").toggleClass(n),e.closest(".is-collapsible").children("article").slideToggle()},a=function(){e(".ui-loading").show()},c=function(){e(".ui-loading").hide()},l=function(e,n,t,o,r){return new s.Warning({title:e,message:n,actions:{primary:{text:t,click:function(e){e.hide(),o()}},secondary:{text:i("Cancel"),click:function(e){return r&&r(),e.hide()}}}}).show()},d=function(e,n){var t;return t=new o.Mini({title:i(e)}),t.show(),n().done(function(){t.hide()})},u=function(n){return function(t){var i=this;p(e(t.currentTarget),function(){return i[n].apply(i,[t])})}},p=function(e,n){return e.addClass("is-disabled").attr("aria-disabled",!0),n().always(function(){e.removeClass("is-disabled").attr("aria-disabled",!1)})},v=function(n){return function(t){t.preventDefault(),e.ajax({url:e(this).data("dismiss-link"),type:"DELETE",success:n})}},m=function(n){e("html, body").animate({scrollTop:n},500)},h=function(n){var t=n.offset().top;return t-e(window).scrollTop()},f=function(e,n){var t=e.offset().top,i=t-n;m(i)},y=function(e){window.location=e},w=function(){window.location.reload()},g=function(e,n){var i,o=e.changedAttributes();if(!o)return!1;for(i=0;i<n.length;i++)if(t.has(o,n[i]))return!0;return!1},b=function(e){return 0===e.length?i("Required field."):""},x=function(e,n){var t=b(e);if(t)return t;if(n){if(/\s/g.test(e))return i("Please do not use any spaces in this field.")}else if(e!==encodeURIComponent(e)||e.match(/[!'()*]/))return i("Please do not use any spaces or special characters in this field.");return""},k=function(n){var i=t.reduce(n,function(n,t){return n+e(t).val().length},0);return S>=i},j=function(n,i,o,s){k(o)?e(n.errorWrapper).removeClass(i.shown).addClass(i.hiding):(e(n.errorWrapper).addClass(i.shown).removeClass(i.hiding),e(n.errorMessage).html("<p>"+t.template(s)({limit:S})+"</p>"),e(n.save).addClass(i.disabled))},C=function(t){var i=e.Deferred();return n([t],function(){i.resolve()},function(){i.reject()}),i.promise()},{toggleExpandCollapse:r,showLoadingIndicator:a,hideLoadingIndicator:c,confirmThenRunOperation:l,runOperationShowingMessage:d,withDisabledElement:u,disableElementWhileRunning:p,deleteNotificationHandler:v,setScrollTop:m,getScrollOffset:h,setScrollOffset:f,redirect:y,reload:w,hasChangedAttributes:g,validateRequiredField:b,validateURLItemEncoding:x,validateTotalKeyLength:k,checkTotalKeyLengthViolations:j,loadJavaScript:C}})}.call(this,define||RequireJS.define,require||RequireJS.require),define("js/factories/login",["jquery.cookie","utility","common/js/components/utils/view_utils"],function(e,n,t){"use strict";return function(e){function n(e,n,t){$.ajax({type:"POST",url:e,dataType:"json",data:n,success:t})}$("input#email").on("input",function(){$("#login_error").removeClass("is-shown")}),$("input#password").on("input",function(){$("#login_error").removeClass("is-shown")}),$("form#login_form").submit(function(i){i.preventDefault();var o=$("#submit"),s=new $.Deferred,r=s.promise();t.disableElementWhileRunning(o,function(){return r});var a=$("#login_form").serialize();n("/login_post",a,function(n){if(n.success){var i=/next=([^&]*)/g.exec(decodeURIComponent(window.location.search));i&&i.length>1&&!isExternal(i[1])?t.redirect(i[1]):t.redirect(e)}else 0===$("#login_error").length?($("#login_form").prepend('<div id="login_error" class="message message-status error">'+n.value+"</span></div>"),$("#login_error").addClass("is-shown"),s.resolve()):($("#login_error").stop().addClass("is-shown").html(n.value),s.resolve())})})}});