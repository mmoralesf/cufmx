(function(e,t){"use strict";RequireJS.define("js/student_account/models/user_account_model",["gettext","underscore","backbone"],function(e,t,i){var s=i.Model.extend({idAttribute:"username",defaults:{username:"",name:"",email:"",password:"",language:null,country:null,date_joined:"",gender:null,goals:"",level_of_education:null,mailing_address:"",year_of_birth:null,bio:null,language_proficiencies:[],requires_parental_consent:!0,profile_image:null,accomplishments_shared:!1,default_public_account_fields:[]},parse:function(e){if(t.isNull(e)||t.isUndefined(e))return{};var i=t.filter(t.keys(e),function(e){return"default_public_account_fields"!==e}),s=t.size(t.difference(i,e.default_public_account_fields))>0;return e.profile_is_public=s,e},hasProfileImage:function(){var e=this.get("profile_image");return t.isObject(e)&&e.has_image===!0},profileImageUrl:function(){return this.get("profile_image").image_url_large},isAboveMinimumAge:function(){var e=this.get("year_of_birth"),i=!(t.isUndefined(e)||t.isNull(e));return i&&!this.get("requires_parental_consent")}});return s})}).call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/student_account/models/user_preferences_model",["gettext","underscore","backbone"],function(e,t,i){var s=i.Model.extend({idAttribute:"account_privacy",defaults:{account_privacy:"private"}});return s})}.call(this,define||RequireJS.define),RequireJS.define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),RequireJS.define("text!templates/fields/field_readonly.underscore",[],function(){return'<% if (title) { %>\n<span class="u-field-title" aria-hidden="true"><%- title %></span>\n<% } %>\n<span class="sr" for="u-field-value-<%- id %>"><%- screenReaderTitle %></span>\n<span class="u-field-value" id="u-field-value-<%- id %>" aria-describedby="u-field-message-<%- id %>"><%- value %></span>\n<span class="u-field-message" id="u-field-message-<%- id %>">\n    <span class="u-field-message-notification" aria-live="polite"></span>\n    <span class="u-field-message-help" id="u-field-help-message-<%- id %>"> <%- message %></span>\n</span>\n'}),RequireJS.define("text!templates/fields/field_dropdown.underscore",[],function(){return'<% if (editable !== \'never\') { %>\n    <% if (title && titleVisible) { %>\n        <label class="u-field-title" for="u-field-select-<%- id %>">\n            <%- title %>\n        </label>\n    <% } else { %>\n        <label class="sr" for="u-field-select-<%- id %>">\n            <%- screenReaderTitle %>\n        </label>\n    <% } %>\n<% } %>\n\n<% if (iconName) { %>\n    <span class="u-field-icon icon fa <%- iconName %> fa-fw" aria-hidden="true"></span>\n<% } %>\n\n<span class="u-field-value">\n    <% if (editable === \'never\') { %>\n        <span class="sr"><%- screenReaderTitle %> &nbsp;</span>\n        <span class="u-field-value-readonly"></span>\n    <% } else { %>\n        <select name="select" id="u-field-select-<%- id %>" aria-describedby="u-field-message-<%- id %>">\n            <% if (showBlankOption) { %>\n                <option value=""></option>\n            <% } %>\n            <% _.each(groupOptions, function(groupOption) { %>\n                <% if (groupOption.groupTitle != null) { %>\n                    <optgroup label="<%- groupOption.groupTitle %>">\n                <% } %>\n                <% _.each(groupOption.selectOptions, function(selectOption) { %>\n                    <option value="<%- selectOption[0] %>"><%- selectOption[1] %></option>\n                <% }); %>\n            <% }); %>\n        </select>\n        <button class="u-field-value-display">\n            <span class="sr"><%- screenReaderTitle %> &nbsp;</span>\n            <span class="u-field-value-readonly"></span>\n            <span class="sr">&nbsp; <%- gettext(\'Click to edit\') %></span>\n        </button>\n    <% } %>\n</span>\n\n<span class="u-field-message" id="u-field-message-<%- id %>">\n    <span class="u-field-message-notification" aria-live="polite"></span>\n    <span class="u-field-message-help" id="u-field-help-message-<%- id %>"><%- message %></span>\n</span>\n'}),RequireJS.define("text!templates/fields/field_link.underscore",[],function(){return'<span class="u-field-title" for="u-field-link-<%- id %>">\n    <%- title %>\n</span>\n<span class="u-field-value">\n    <a id="u-field-link-<%- id %>" href="<%- linkHref %>" aria-describedby="u-field-message-help-<%- id %>">\n       <span class="sr"><%- screenReaderTitle %></span>\n       <span class="u-field-link-title-<%- id %>" aria-hidden="true"><%- linkTitle %></span>\n    </a>\n</span>\n<span class="u-field-message" id="u-field-message-<%- id %>">\n    <span class="u-field-message-notification" aria-live="polite"></span>\n    <span class="u-field-message-help" id="u-field-message-help-<%- id %>"><%- message %></span>\n</span>\n'}),RequireJS.define("text!templates/fields/field_text.underscore",[],function(){return'<label class="u-field-title" for="u-field-input-<%- id %>">\n    <%- gettext(title) %>\n</label>\n<span class="u-field-value">\n    <input id="u-field-input-<%- id %>" aria-describedby="u-field-message-help-<%- id %>" type="text" name="input" value="<%- value %>">\n</span>\n<span class="u-field-message" id="u-field-message-<%- id %>">\n    <span class="u-field-message-notification" aria-live="polite"></span>\n    <span class="u-field-message-help" id="u-field-message-help-<%- id %>"> <%- message %></span>\n</span>\n'}),RequireJS.define("text!templates/fields/field_textarea.underscore",[],function(){return'<div class="wrapper-u-field">\n    <div class="u-field-header">\n        <% if (mode === \'edit\') { %>\n            <label class="u-field-title" for="u-field-textarea-<%- id %>" id="u-field-title-<%- id %>"></label>\n        <% } else { %>\n            <span class="u-field-title" id="u-field-title-<%- id %>"></span>\n        <% } %>\n        <% if (messagePosition === \'header\') { %>\n            <span class="u-field-message" id="u-field-message-<%- id %>">\n                <span class="u-field-message-notification" aria-live="polite"></span>\n                <span class="u-field-message-help" id="u-field-message-help-<%- id %>"> <%- message %></span>\n            </span>\n        <% }%>\n    </div>\n\n    <div class="u-field-value" id="u-field-value-<%- id %>"\n        <% if (mode === \'edit\') { %>\n            aria-labelledby="u-field-title-<%- id %>"><textarea id="u-field-textarea-<%- id %>" rows="4"\n            <% if (message) { %>\n                aria-describedby="u-field-message-help-<%- id %>"\n            <% } %>\n            ><%- value %></textarea>\n        <% } else if (editable === \'never\') { %>\n            ><p class="sr"><%- screenReaderTitle %></p><span class="u-field-value-readonly" aria-hidden="false"\n            <% if (message) { %>\n                aria-describedby="u-field-message-help-<%- id %>"\n            <% } %>\n            ><%- value %></span>\n        <% } else { %>\n            ><span class="clickable" role="button" tabindex="0">\n            <span class="sr"><%- screenReaderTitle %></span>\n            <span class="u-field-value-readonly" aria-hidden="false" aria-describedby="u-field-placeholder-value-<%- id %>"><%- value %></span>\n            <span class="sr"><%- gettext(\'Click to edit\') %></span>\n            <span class="sr" id="u-field-placeholder-value-<%- id %>"><%- placeholderValue %></span>\n            </span>\n        <% } %>\n    </div>\n\n    <div class="u-field-footer">\n        <% if (messagePosition === \'footer\') { %>\n            <span class="u-field-message" id="u-field-message-<%- id %>">\n                <span class="u-field-message-notification" aria-live="polite"></span>\n                <span class="u-field-message-help" id="u-field-message-help-<%- id %>"> <%- message %></span>\n            </span>\n        <% } %>\n    </div>\n</div>\n'}),function(e,t){if("function"==typeof RequireJS.define&&RequireJS.define.amd)RequireJS.define("backbone-super",["underscore","backbone"],function(e,i){t(e,i)});else if("undefined"!=typeof exports&&"function"==typeof require){var i=require("underscore"),s=require("backbone");t(i,s)}else t(e._,e.Backbone)}(this,function(e,t){t.Model.extend=t.Collection.extend=t.Router.extend=t.View.extend=function(e,t){var i=l(this,e,t);return i.extend=this.extend,i};var i=function(e){throw"Super does not implement this method: "+e},s=/\b_super\b/,n=function(e,t,s){var n=function(){var n=this._super;this._super=e[t]||i(t);var a;try{a=s.apply(this,arguments)}finally{this._super=n}return a};for(var a in s)n[a]=s[a],delete s[a];return n},a=function(){},l=function(t,i,l){var o,r=t.prototype;if(o=i&&i.hasOwnProperty("constructor")?i.constructor:function(){return t.apply(this,arguments)},e.extend(o,t,l),a.prototype=r,o.prototype=new a,i){e.extend(o.prototype,i);for(var d in i)"function"==typeof i[d]&&s.test(i[d])&&(o.prototype[d]=n(r,d,i[d]))}return l&&e.extend(o,l),o.prototype.constructor=o,o.__super__=r,o};return l}),function(e,t){"use strict";RequireJS.define("js/views/fields",["gettext","jquery","underscore","backbone","edx-ui-toolkit/js/utils/html-utils","text!templates/fields/field_readonly.underscore","text!templates/fields/field_dropdown.underscore","text!templates/fields/field_link.underscore","text!templates/fields/field_text.underscore","text!templates/fields/field_textarea.underscore","backbone-super"],function(e,i,s,n,a,l,o,r,d,u){var c=6e3,p={};return p.FieldView=n.View.extend({fieldType:"generic",className:function(){return"u-field u-field-"+this.fieldType+" u-field-"+this.options.valueAttribute},tagName:"div",indicators:{canEdit:a.joinHtml(a.HTML('<span class="icon fa fa-pencil message-can-edit" aria-hidden="true"></span><span class="sr">'),e("Editable"),a.HTML("</span>")),error:a.joinHtml(a.HTML('<span class="fa fa-exclamation-triangle message-error" aria-hidden="true"></span><span class="sr">'),e("Error"),a.HTML("</span>")),validationError:a.joinHtml(a.HTML('<span class="fa fa-exclamation-triangle message-validation-error" aria-hidden="true"></span><span class="sr">'),e("Validation Error"),a.HTML("</span>")),inProgress:a.joinHtml(a.HTML('<span class="fa fa-spinner fa-pulse message-in-progress" aria-hidden="true"></span><span class="sr">'),e("In Progress"),a.HTML("</span>")),success:a.joinHtml(a.HTML('<span class="fa fa-check message-success" aria-hidden="true"></span><span class="sr">'),e("Success"),a.HTML("</span>")),plus:a.joinHtml(a.HTML('<span class="fa fa-plus placeholder" aria-hidden="true"></span><span class="sr">'),e("Placeholder"),a.HTML("</span>"))},messages:{canEdit:"",error:e("An error occurred. Please try again."),validationError:"",inProgress:e("Saving"),success:e("Your changes have been saved.")},constructor:function(e){this.options=s.extend({},e),n.View.apply(this,arguments)},initialize:function(){this.template=s.template(this.fieldTemplate||""),this.helpMessage=this.options.helpMessage||"",this.showMessages=s.isUndefined(this.options.showMessages)?!0:this.options.showMessages,s.bindAll(this,"modelValue","modelValueIsSet","showNotificationMessage","getNotificationMessage","getMessage","title","showHelpMessage","showInProgressMessage","showSuccessMessage","showErrorMessage")},modelValue:function(){return this.model.get(this.options.valueAttribute)},modelValueIsSet:function(){return this.modelValue()===!0},title:function(e){return a.setHtml(this.$(".u-field-title"),e)},getMessage:function(e){return e+"Message"in this?this[e+"Message"].call(this):this.showMessages?a.joinHtml(this.indicators[e],this.messages[e]):this.indicators[e]},showHelpMessage:function(e){(s.isUndefined(e)||s.isNull(e))&&(e=this.helpMessage),this.$(".u-field-message-notification").html(""),a.setHtml(this.$(".u-field-message-help"),e)},getNotificationMessage:function(){return a.HTML(this.$(".u-field-message-notification").html())},showNotificationMessage:function(e){this.$(".u-field-message-help").html(""),a.setHtml(this.$(".u-field-message-notification"),e)},showCanEditMessage:function(e){!s.isUndefined(e)&&e?this.showNotificationMessage(this.getMessage("canEdit")):this.showNotificationMessage("")},showInProgressMessage:function(){this.showNotificationMessage(this.getMessage("inProgress"))},showSuccessMessage:function(){var e=this.getMessage("success");this.showNotificationMessage(e),this.options.refreshPageOnSave&&location.reload(!0);var t=this,i=Date.now();this.lastSuccessMessageContext=i,setTimeout(function(){i===t.lastSuccessMessageContext&&t.getNotificationMessage().toString()===e.toString()&&("toggle"===t.editable?t.showCanEditMessage(!0):t.showHelpMessage())},c)},showErrorMessage:function(e){if(400===e.status)try{var t=JSON.parse(e.responseText),i=t.field_errors[this.options.valueAttribute].user_message,s=a.joinHtml(this.indicators.validationError,i);this.showNotificationMessage(s)}catch(n){this.showNotificationMessage(this.getMessage("error"))}else this.showNotificationMessage(this.getMessage("error"))}}),p.EditableFieldView=p.FieldView.extend({initialize:function(e){this.persistChanges=s.isUndefined(e.persistChanges)?!1:e.persistChanges,s.bindAll(this,"saveAttributes","saveSucceeded","showDisplayMode","showEditMode","startEditing","finishEditing"),this._super(e),this.editable=s.isUndefined(this.options.editable)?"always":this.options.editable,this.$el.addClass("editable-"+this.editable),"always"===this.editable?this.showEditMode(!1):this.showDisplayMode(!1)},saveAttributes:function(e,t){if(this.persistChanges===!0){var i=this,n={contentType:"application/merge-patch+json",patch:!0,wait:!0,success:function(){i.saveSucceeded()},error:function(e,t){i.showErrorMessage(t)}};this.showInProgressMessage(),this.model.save(e,s.extend(n,t))}},saveSucceeded:function(){this.showSuccessMessage()},updateDisplayModeClass:function(){this.$el.removeClass("mode-edit"),this.$el.toggleClass("mode-hidden","never"===this.editable&&!this.modelValueIsSet()),this.$el.toggleClass("mode-placeholder","toggle"===this.editable&&!this.modelValueIsSet()),this.$el.toggleClass("mode-display",this.modelValueIsSet())},showDisplayMode:function(e){this.mode="display",e&&this.render(),this.updateDisplayModeClass()},showEditMode:function(e){this.mode="edit",e&&this.render(),this.$el.removeClass("mode-hidden"),this.$el.removeClass("mode-placeholder"),this.$el.removeClass("mode-display"),this.$el.addClass("mode-edit")},startEditing:function(){"toggle"===this.editable&&"edit"!==this.mode&&this.showEditMode(!0)},finishEditing:function(){var e;this.persistChanges!==!1&&"edit"===this.mode&&(e=this.modelValue(),s.isUndefined(e)||s.isNull(e)||(e=e.toString()),this.fieldValue()!==e?this.saveValue():"always"===this.editable?this.showEditMode(!0):this.showDisplayMode(!0))},highlightFieldOnError:function(){this.$el.addClass("error")},unhighlightField:function(){this.$el.removeClass("error")}}),p.ReadonlyFieldView=p.FieldView.extend({fieldType:"readonly",fieldTemplate:l,initialize:function(e){this._super(e),s.bindAll(this,"render","fieldValue","updateValueInField"),this.listenTo(this.model,"change:"+this.options.valueAttribute,this.updateValueInField)},render:function(){return a.setHtml(this.$el,a.template(this.fieldTemplate)({id:this.options.valueAttribute,title:this.options.title,screenReaderTitle:this.options.screenReaderTitle||this.options.title,value:this.modelValue(),message:this.helpMessage})),this.delegateEvents(),this},fieldValue:function(){return this.$(".u-field-value").text()},updateValueInField:function(){this.$(".u-field-value ").text(this.modelValue())}}),p.TextFieldView=p.EditableFieldView.extend({fieldType:"text",fieldTemplate:d,events:{"change input":"saveValue"},initialize:function(e){this._super(e),s.bindAll(this,"render","fieldValue","updateValueInField","saveValue"),this.listenTo(this.model,"change:"+this.options.valueAttribute,this.updateValueInField)},render:function(){return a.setHtml(this.$el,a.template(this.fieldTemplate)({id:this.options.valueAttribute,title:this.options.title,value:this.modelValue(),message:this.helpMessage})),this.delegateEvents(),this},fieldValue:function(){return this.$(".u-field-value input").val()},updateValueInField:function(){var e=s.isUndefined(this.modelValue())||s.isNull(this.modelValue())?"":this.modelValue();this.$(".u-field-value input").val(e)},saveValue:function(){var e={};e[this.options.valueAttribute]=this.fieldValue(),this.saveAttributes(e)}}),p.DropdownFieldView=p.EditableFieldView.extend({fieldType:"dropdown",fieldTemplate:o,events:{click:"startEditing","focusout select":"finishEditing"},initialize:function(e){s.bindAll(this,"render","optionForValue","fieldValue","displayValue","updateValueInField","saveValue","createGroupOptions"),this._super(e),this.listenTo(this.model,"change:"+this.options.valueAttribute,this.updateValueInField)},render:function(){return a.setHtml(this.$el,a.template(this.fieldTemplate)({id:this.options.valueAttribute,mode:this.mode,editable:this.editable,title:this.options.title,screenReaderTitle:this.options.screenReaderTitle||this.options.title,titleVisible:this.options.titleVisible!==t?this.options.titleVisible:!0,iconName:this.options.iconName,showBlankOption:!this.options.required||!this.modelValueIsSet(),groupOptions:this.createGroupOptions(),message:this.helpMessage})),this.delegateEvents(),this.updateValueInField(),"toggle"===this.editable&&this.showCanEditMessage("display"===this.mode),this},modelValueIsSet:function(){var e=this.modelValue();return s.isUndefined(e)||s.isNull(e)||""===e?!1:!s.isUndefined(this.optionForValue(e))},optionForValue:function(e){var t=[];return s.isUndefined(this.options.groupOptions)?s.find(this.options.options,function(t){return t[0]===e}):(s.each(this.options.groupOptions,function(e){t=t.concat(e.selectOptions)}),s.find(t,function(t){return t[0]===e}))},fieldValue:function(){var e;return e="never"===this.editable?this.modelValueIsSet()?this.modelValue():null:this.$(".u-field-value select").val(),""===e?null:e},displayValue:function(e){if(e){var t=this.optionForValue(e);return t?t[1]:""}return""},updateValueInField:function(){"never"!==this.editable&&this.$(".u-field-value select").val(this.modelValue()||"");var e=this.displayValue(this.modelValue()||"");this.modelValueIsSet()===!1&&(e=this.options.placeholderValue||""),this.$(".u-field-value").attr("aria-label",this.options.title),this.$(".u-field-value-readonly").text(e),"display"===this.mode&&this.updateDisplayModeClass()},saveValue:function(){var e={};e[this.options.valueAttribute]=this.fieldValue(),this.saveAttributes(e)},showDisplayMode:function(e){this._super(e),"toggle"===this.editable&&this.$(".u-field-value a").focus()},showEditMode:function(e){this._super(e),"toggle"===this.editable&&this.$(".u-field-value select").focus()},saveSucceeded:function(){"toggle"===this.editable&&this.showDisplayMode(),this.options.required&&this.modelValueIsSet()&&this.$('option[value=""]').remove(),this._super()},disableField:function(e){"never"!==this.editable&&this.$(".u-field-value select").prop("disabled",e)},createGroupOptions:function(){return s.isUndefined(this.options.groupOptions)?[{groupTitle:null,selectOptions:this.options.options}]:this.options.groupOptions}}),p.TextareaFieldView=p.EditableFieldView.extend({fieldType:"textarea",fieldTemplate:u,events:{"keydown .wrapper-u-field":"startEditing","click .wrapper-u-field":"startEditing","click .u-field-placeholder":"startEditing","focusout textarea":"finishEditing","change textarea":"adjustTextareaHeight","keyup textarea":"adjustTextareaHeight","keydown textarea":"onKeyDown","paste textarea":"adjustTextareaHeight","cut textarea":"adjustTextareaHeight"},initialize:function(e){s.bindAll(this,"render","onKeyDown","adjustTextareaHeight","fieldValue","saveValue","updateView"),this._super(e),this.listenTo(this.model,"change:"+this.options.valueAttribute,this.updateView)},render:function(){var e=this.modelValue();return"display"===this.mode&&(e=e||this.options.placeholderValue),a.setHtml(this.$el,a.template(this.fieldTemplate)({id:this.options.valueAttribute,screenReaderTitle:this.options.screenReaderTitle||this.options.title,mode:this.mode,editable:this.editable,value:e,message:this.helpMessage,messagePosition:this.options.messagePosition||"footer",placeholderValue:this.options.placeholderValue})),this.delegateEvents(),this.title(this.modelValue()||"edit"===this.mode?this.options.title:a.joinHtml(this.indicators.plus,this.options.title)),"toggle"===this.editable&&this.showCanEditMessage("display"===this.mode),this},onKeyDown:function(e){13===e.keyCode?(e.preventDefault(),this.finishEditing(e)):this.adjustTextareaHeight()},adjustTextareaHeight:function(){if(this.persistChanges!==!1){var e=this.$("textarea");e.css("height","auto").css("height",e.prop("scrollHeight")+10)}},modelValue:function(){var e=this._super();return e?i.trim(e):""},fieldValue:function(){return"edit"===this.mode?this.$(".u-field-value textarea").val():this.$(".u-field-value .u-field-value-readonly").text()},saveValue:function(){var e={};e[this.options.valueAttribute]=this.fieldValue(),this.saveAttributes(e)},updateView:function(){"edit"!==this.mode&&this.showDisplayMode(!0)},modelValueIsSet:function(){return!(""===this.modelValue())},showEditMode:function(e){this._super(e),this.adjustTextareaHeight(),this.$(".u-field-value textarea").focus()},saveSucceeded:function(){this._super(),"toggle"===this.editable&&(this.showDisplayMode(!0),this.$("a").focus())}}),p.LinkFieldView=p.FieldView.extend({fieldType:"link",fieldTemplate:r,events:{"click a":"linkClicked"},initialize:function(e){this._super(e),s.bindAll(this,"render","linkClicked")},render:function(){return a.setHtml(this.$el,a.template(this.fieldTemplate)({id:this.options.valueAttribute,title:this.options.title,screenReaderTitle:this.options.screenReaderTitle||this.options.title,linkTitle:this.options.linkTitle,linkHref:this.options.linkHref,message:this.helpMessage})),this.delegateEvents(),this},linkClicked:function(e){e.preventDefault()}}),p})}.call(this,define||RequireJS.define),RequireJS.define("text!templates/fields/field_text_account.underscore",[],function(){return'<div class="u-field-value field">\n    <label class="u-field-title field-label" for="field-input-<%- id %>"><%- title %></label>\n    <input class="field-input input-text" type="text" id="field-input-<%- id %>" title="Input field for <%- id %>" aria-describedby="u-field-message-help-<%- id %>" name="input" value="<%- value %>" />\n</div>\n<span class="u-field-message" id="u-field-message-<%- id %>">\n    <span class="u-field-message-notification" aria-live="polite"></span>\n    <span class="u-field-message-help" id="u-field-message-help-<%- id %>"> <%- message %></span>\n</span>\n'}),RequireJS.define("text!templates/fields/field_readonly_account.underscore",[],function(){return'<div class="field">\n    <span class="u-field-title field-label"><%- title %></span>\n    <span class="u-field-value" id="u-field-value-<%- id %>" aria-describedby="u-field-message-help-<%- id %>"><b><%- value %></b></span>\n</div>\n<span class="u-field-message" id="u-field-message-<%- id %>">\n    <span class="u-field-message-notification" aria-live="polite"></span>\n    <span class="u-field-message-help" id="u-field-message-help-<%- id %>"> <%- message %></span>\n</span>\n'}),RequireJS.define("text!templates/fields/field_link_account.underscore",[],function(){return'<div class="u-field-value field">\n    <span class="u-field-title field-label"><%- title %></span>\n    <button class="u-field-link u-field-link-title-<%- id %> " id="u-field-link-<%- id %>" aria-describedby="u-field-message-help-<%- id %>"><%- linkTitle %></button>\n</div>\n<span class="u-field-message" id="u-field-message-<%- id %>">\n    <span class="u-field-message-notification" aria-live="polite"></span>\n    <span class="u-field-message-help" id="u-field-message-help-<%- id %>"> <%- message %></span>\n</span>\n'}),RequireJS.define("text!templates/fields/field_dropdown_account.underscore",[],function(){return'<div class="u-field-value field">\n    <% if (editable !== \'never\') { %>\n        <% if (title && titleVisible) { %>\n            <label class="u-field-title field-label" for="u-field-select-<%- id %>">\n                <%- title %>\n            </label>\n        <% } else { %>\n            <label class="sr" for="u-field-select-<%- id %>">\n                <%- screenReaderTitle %>\n            </label>\n        <% } %>\n    <% } %>\n\n    <% if (iconName) { %>\n        <span class="u-field-icon icon fa <%- iconName %> fa-fw" aria-hidden="true"></span>\n    <% } %>\n\n    <% if (editable === \'never\') { %>\n        <span class="sr"><%- screenReaderTitle %></span>\n        <span class="u-field-value-readonly"></span>\n    <% } else { %>\n        <select name="select" id="u-field-select-<%- id %>" aria-describedby="u-field-help-message-<%- id %>">\n            <% _.each(groupOptions, function(groupOption) { %>\n                <% if (showBlankOption) { %>\n                    <% if (groupOption.nullValueOptionLabel) { %>\n                        <option value=""><%- groupOption.nullValueOptionLabel %></option>\n                    <% } else { %>\n                        <option value=""></option>\n                    <% } %>\n                <% } %>\n                    <% if (groupOption.groupTitle != null) { %>\n                        <optgroup label="<%- groupOption.groupTitle %>">\n                    <% } %>\n                    <% _.each(groupOption.selectOptions, function(selectOption) { %>\n                        <option value="<%- selectOption[0] %>"><%- selectOption[1] %></option>\n                    <% }); %>\n            <% }); %>\n        </select>\n        <span class="icon-caret-down" aria-hidden="true"></span>\n        <button class="u-field-value-display">\n            <span class="sr"><%- screenReaderTitle %> &nbsp;</span>\n            <span class="u-field-value-readonly"></span>\n            <span class="sr"><%- gettext(\'Click to edit\') %></span>\n        </button>\n    <% } %>\n</div>\n\n<span class="u-field-message" id="u-field-message-<%- id %>">\n    <span class="u-field-message-notification" aria-live="polite"></span>\n    <span class="u-field-message-help" id="u-field-help-message-<%- id %>"><%- message %></span>\n</span>\n'}),RequireJS.define("text!templates/fields/field_social_link_account.underscore",[],function(){return'<div class="u-field-value field <%- linkClass %>">\n    <h4 class="u-field-title field-label"><%- title %></h4>\n    <span class="u-field-social-help"><%- subTitle %></span>\n    <a class="u-field-link" id="u-field-link-<%- id %>" href="<%- linkHref %>" aria-describedby="u-field-message-help-<%- id %>">\n        <span class="sr"><%- screenReaderTitle %></span>\n        <span class="u-field-link-title-<%- id %>" aria-hidden="true"><%- linkTitle %></span>\n    </a>\n</div>\n\n<span class="u-field-message" id="u-field-message-<%- id %>">\n    <span class="u-field-message-notification" aria-live="polite"></span>\n    <span class="u-field-message-help" id="u-field-message-help-<%- id %>"><%- message %></span>\n</span>\n'}),RequireJS.define("text!templates/fields/field_order_history.underscore",[],function(){return'<div class="field u-field-order" <% if (receiptUrl) { %> role="group" aria-labelledby="order-title-<%- orderId %>" <% } else { %> aria-hidden="true" <% } %>>\n    <span class="u-field-order-number"><span class="sr"><%- gettext(\'Order Number\') %>: </span><%- orderId %></span>\n    <span class="u-field-order-date"><span class="sr"><%- gettext(\'Date Placed\') %>: </span><%- orderDate %></span>\n    <span class="u-field-order-price"><span class="sr"><%- gettext(\'Cost\') %>: </span><% if (!isNaN(parseFloat(totalPrice))) { %>$<% } %><%- totalPrice %></span>\n    <span class="u-field-order-link">\n        <% if (receiptUrl) { %>\n            <a class="u-field-link" target="_blank" href="<%- receiptUrl %>"><%- gettext(\'Order Details\') %><span class="sr"> <%- gettext(\'for\') %> <%- orderId %></span></a>\n        <% } %>\n    </span>\n    <% _.each(lines, function(item){ %>\n        <div class="field u-field-order-lines">\n            <span class="u-field-order-number"><span class="sr"><%- gettext(\'Product Name\') %>: </span><%- item.title %></span>\n            <span class="u-field-order-date"><span class="sr"><%- gettext(\'Date Placed\') %>: </span><%- orderDate %></span>\n            <span class="u-field-order-price"><span class="sr"><%- gettext(\'Cost\') %>: </span><% if (!isNaN(parseFloat(item.line_price_excl_tax))) { %>$<% } %><%- item.line_price_excl_tax %></span>\n        </div>\n    <% }); %>\n</div>\n'}),function(e,t){"use strict";RequireJS.define("js/student_account/views/account_settings_fields",["gettext","jquery","underscore","backbone","js/views/fields","text!templates/fields/field_text_account.underscore","text!templates/fields/field_readonly_account.underscore","text!templates/fields/field_link_account.underscore","text!templates/fields/field_dropdown_account.underscore","text!templates/fields/field_social_link_account.underscore","text!templates/fields/field_order_history.underscore","edx-ui-toolkit/js/utils/string-utils","edx-ui-toolkit/js/utils/html-utils"],function(e,t,i,s,n,a,l,o,r,d,u,c,p){var f={ReadonlyFieldView:n.ReadonlyFieldView.extend({fieldTemplate:l}),TextFieldView:n.TextFieldView.extend({fieldTemplate:a}),DropdownFieldView:n.DropdownFieldView.extend({fieldTemplate:r}),EmailFieldView:n.TextFieldView.extend({fieldTemplate:a,successMessage:function(){return p.joinHtml(this.indicators.success,c.interpolate(e("We've sent a confirmation message to {new_email_address}. Click the link in the message to update your email address."),{new_email_address:this.fieldValue()}))}}),LanguagePreferenceFieldView:n.DropdownFieldView.extend({fieldTemplate:r,saveSucceeded:function(){var i={language:this.modelValue()},s=this;t.ajax({type:"POST",url:"/i18n/setlang/",data:i,dataType:"html",success:function(){s.showSuccessMessage()},error:function(){s.showNotificationMessage(p.joinHtml(s.indicators.error,e("You must sign out and sign back in before your language changes take effect.")))}})}}),TimeZoneFieldView:n.DropdownFieldView.extend({fieldTemplate:r,initialize:function(e){this.options=i.extend({},e),i.bindAll(this,"listenToCountryView","updateCountrySubheader","replaceOrAddGroupOption"),this._super(e)},listenToCountryView:function(e){this.listenTo(e.model,"change:country",this.updateCountrySubheader)},updateCountrySubheader:function(e){var i=this;t.ajax({type:"GET",url:"/user_api/v1/preferences/time_zones/",data:{country_code:e.attributes.country},success:function(e){var s=t.map(e,function(e){return[[e.time_zone,e.description]]});i.replaceOrAddGroupOption("Country Time Zones",s),i.render()}})},updateValueInField:function(){var e;this.modelValue()&&(e=[[this.modelValue(),this.displayValue(this.modelValue())]],this.replaceOrAddGroupOption("Currently Selected Time Zone",e)),this._super()},replaceOrAddGroupOption:function(t,s){var n={groupTitle:e(t),selectOptions:s},a=i.findIndex(this.options.groupOptions,function(i){return i.groupTitle===e(t)});a>=0?this.options.groupOptions[a]=n:this.options.groupOptions.unshift(n)}}),PasswordFieldView:n.LinkFieldView.extend({fieldType:"button",fieldTemplate:o,events:{"click button":"linkClicked"},initialize:function(e){this.options=i.extend({},e),this._super(e),i.bindAll(this,"resetPassword")},linkClicked:function(e){e.preventDefault(),this.toggleDisableButton(!0),this.resetPassword(e)},resetPassword:function(){var e={};e[this.options.emailAttribute]=this.model.get(this.options.emailAttribute);var i=this;t.ajax({type:"POST",url:i.options.linkHref,data:e,success:function(){i.showSuccessMessage(),i.setMessageTimeout()},error:function(e){i.showErrorMessage(e),i.setMessageTimeout(),i.toggleDisableButton(!1)}})},toggleDisableButton:function(e){var t=this.$("#u-field-link-"+this.options.valueAttribute);t&&t.prop("disabled",e)},setMessageTimeout:function(){var e=this;setTimeout(function(){
e.showHelpMessage()},6e3)},successMessage:function(){return p.joinHtml(this.indicators.success,p.interpolateHtml(e("We've sent a message to {email}. Click the link in the message to reset your password. Didn't receive the message? Contact {anchorStart}technical support{anchorEnd}."),{email:this.model.get(this.options.emailAttribute),anchorStart:p.HTML(c.interpolate('<a href="{passwordResetSupportUrl}">',{passwordResetSupportUrl:this.options.passwordResetSupportUrl})),anchorEnd:p.HTML("</a>")}))}}),LanguageProficienciesFieldView:n.DropdownFieldView.extend({fieldTemplate:r,modelValue:function(){var e=this.model.get(this.options.valueAttribute);return i.isArray(e)&&e.length>0?e[0].code:null},saveValue:function(){if(this.persistChanges===!0){var e={},t=this.fieldValue()?[{code:this.fieldValue()}]:[];e[this.options.valueAttribute]=t,this.saveAttributes(e)}}}),AuthFieldView:n.LinkFieldView.extend({fieldTemplate:d,className:function(){return"u-field u-field-social u-field-"+this.options.valueAttribute},initialize:function(e){this.options=i.extend({},e),this._super(e),i.bindAll(this,"redirect_to","disconnect","successMessage","inProgressMessage")},render:function(){var t="",i="",s="",n=c.interpolate(e("Link your {accountName} account"),{accountName:this.options.title});return this.options.connected?(t=e("Unlink This Account"),i="social-field-linked",s=c.interpolate(e("You can use your {accountName} account to sign in to your {platformName} account."),{accountName:this.options.title,platformName:this.options.platformName}),n=c.interpolate(e("Unlink your {accountName} account"),{accountName:this.options.title})):this.options.acceptsLogins&&(t=e("Link Your Account"),i="social-field-unlinked",s=c.interpolate(e("Link your {accountName} account to your {platformName} account and use {accountName} to sign in to {platformName}."),{accountName:this.options.title,platformName:this.options.platformName})),p.setHtml(this.$el,p.template(this.fieldTemplate)({id:this.options.valueAttribute,title:this.options.title,screenReaderTitle:n,linkTitle:t,subTitle:s,linkClass:i,linkHref:"#",message:this.helpMessage})),this.delegateEvents(),this},linkClicked:function(e){e.preventDefault(),this.showInProgressMessage(),this.options.connected?this.disconnect():this.redirect_to(this.options.connectUrl)},redirect_to:function(e){window.location.href=e},disconnect:function(){var e={},i=this;t.ajax({type:"POST",url:this.options.disconnectUrl,data:e,dataType:"html",success:function(){i.options.connected=!1,i.render(),i.showSuccessMessage()},error:function(e){i.showErrorMessage(e)}})},inProgressMessage:function(){return p.joinHtml(this.indicators.inProgress,e(this.options.connected?"Unlinking":"Linking"))},successMessage:function(){return p.joinHtml(this.indicators.success,e("Successfully unlinked."))}}),OrderHistoryFieldView:n.ReadonlyFieldView.extend({fieldType:"orderHistory",fieldTemplate:u,initialize:function(e){this.options=e,this._super(e),this.template=p.template(this.fieldTemplate)},render:function(){return p.setHtml(this.$el,this.template({totalPrice:this.options.totalPrice,orderId:this.options.orderId,orderDate:this.options.orderDate,receiptUrl:this.options.receiptUrl,valueAttribute:this.options.valueAttribute,lines:this.options.lines})),this.delegateEvents(),this}})};return f})}.call(this,define||RequireJS.define),function(e){"use strict";RequireJS.define("edx-ui-toolkit/js/utils/constants",[],function(){return{keys:{tab:"Tab",enter:"Enter",esc:"Escape",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown"},keyCodes:{tab:9,enter:13,esc:27,space:32,left:37,up:38,right:39,down:40}}})}.call(this,"function"==typeof RequireJS.define&&RequireJS.define.amd?RequireJS.define:"undefined"!=typeof RequireJS?RequireJS.define:edx.GlobalLoader.defineAs("constants","edx-ui-toolkit/js/utils/constants")),RequireJS.define("text!common/templates/components/tabbed_view.underscore",[],function(){return'<div class="page-content-nav" role="tablist"></div>\n<div class="page-content-main">\n    <div class="tabs"></div>\n</div>\n'}),RequireJS.define("text!common/templates/components/tab.underscore",[],function(){return'<button role="tab" class="nav-item tab" data-url="<%- url %>" data-index="<%- index %>" aria-selected="false" aria-expanded="false" aria-controls="<%- tabPanelId %>" tabindex="-1" id="tab-<%- index %>"><%- title %></button>\n'}),RequireJS.define("text!common/templates/components/tabpanel.underscore",[],function(){return'<div role="tabpanel" class="tabpanel is-hidden" id="<%= tabId %>" aria-labelledby="tab-<%= index %>" aria-hidden="true" tabindex="0"></div>\n'}),function(e){"use strict";RequireJS.define("common/js/components/views/tabbed_view",["backbone","underscore","jquery","edx-ui-toolkit/js/utils/constants","text!common/templates/components/tabbed_view.underscore","text!common/templates/components/tab.underscore","text!common/templates/components/tabpanel.underscore"],function(e,t,i,s,n,a,l){var o=function(e){return"tabpanel-"+e},r=e.View.extend({template:t.template(l),initialize:function(e){this.url=e.url,this.view=e.view,this.index=e.index},render:function(){var e=this.template({tabId:o(this.url),index:this.index});return this.setElement(i(e)),this.$el.append(this.view.render().el),this}}),d=e.View.extend({events:{"click .tab":"switchTab","keydown .tab":"keydownHandler"},initialize:function(e){this.router=e.router||null,this.tabs=e.tabs,this.template=t.template(n)({viewLabel:this.viewLabel}),t.each(this.tabs,function(e,t){e.view=new r({url:e.url,view:e.view,index:t})},this),this.urlMap=t.reduce(this.tabs,function(e,t){return e[t.url]=t,e},{})},render:function(){var s=this;return this.$el.html(this.template),t.each(this.tabs,function(e,n){var l=i(t.template(a)({index:n,title:e.title,url:e.url,tabPanelId:o(e.url)})),r=this.$(".tabs");s.$(".page-content-nav").append(l),r.append(e.view.render().$el)},this),e.history.getHash()in this.urlMap||this.setActiveTab(0),this},setActiveTab:function(e){var t=this.getTabMeta(e),i=t.tab,s=i.view,n=t.element;this.$("button.is-active").removeClass("is-active").attr({"aria-expanded":"false","aria-selected":"false",tabindex:"-1"}),this.$('.tabpanel[aria-hidden="false"]').addClass("is-hidden").attr({"aria-hidden":"true"}),this.router&&this.router.navigate(i.url,{replace:!0}),n.addClass("is-active").attr({"aria-expanded":"true","aria-selected":"true",tabindex:"0"}),s.$el.removeClass("is-hidden").attr({"aria-hidden":"false"})},switchTab:function(e){e.preventDefault(),this.setActiveTab(i(e.currentTarget).data("index"))},previousTab:function(e,t){var s,n;return s=0===t?i(e).parent().find(".tab").last():i(e).parent().find(".tab:eq("+t+")").prev(),n=i(s).data("index"),s.focus(),!1},nextTab:function(e,t,s){var n,a;return n=t===s?i(e).parent().find(".tab").first():i(e).parent().find(".tab:eq("+t+")").next(),a=i(n).data("index"),n.focus(),!1},keydownHandler:function(e){var t=e.which,n=i(e.currentTarget),a=i(n).parent().find(".tab").index(n),l=i(n).parent().find(".tab").size()-1,o=i(n).data("index");switch(t){case s.keyCodes.left:case s.keyCodes.up:e.preventDefault(),this.previousTab(n,a);break;case s.keyCodes.right:case s.keyCodes.down:e.preventDefault(),this.nextTab(n,a,l);break;case s.keyCodes.enter:case s.keyCodes.space:this.setActiveTab(o);break;default:return!0}},getTabMeta:function(e){var t,i;return"string"==typeof e?(t=this.urlMap[e],i=this.$("button[data-url="+e+"]")):(t=this.tabs[e],i=this.$("button[data-index="+e+"]")),{tab:t,element:i}}});return d})}.call(this,define||RequireJS.define),RequireJS.define("text!templates/student_account/account_settings_section.underscore",[],function(){return'<h2 class="sr" id="header-subtitle-<%- tabName %>">\n    <%- tabLabel %>\n</h2>\n<% _.each(sections, function(section) { %>\n    <div class="section">\n        <% if (section.subtitle) { %>\n            <p class="account-settings-header-subtitle"><%- section.subtitle %></p>\n        <% } %>\n        <h3 class="section-header"><%- gettext(section.title) %></h3>\n        <div class="account-settings-section-body <%- tabName %>-section-body">\n            <div class="ui-loading-error is-hidden">\n                <span class="fa fa-exclamation-triangle message-error" aria-hidden="true"></span>\n                <span class="copy"><%- gettext("An error occurred. Please reload the page.") %></span>\n            </div>\n        </div>\n    </div>\n<% }); %>\n'}),function(e,t){"use strict";RequireJS.define("js/student_account/views/account_section_view",["gettext","jquery","underscore","backbone","text!templates/student_account/account_settings_section.underscore"],function(e,t,i,s,n){var a=s.View.extend({initialize:function(e){this.options=e,i.bindAll(this,"render","renderFields")},render:function(){this.$el.html(i.template(n)({sections:this.options.sections,tabName:this.options.tabName,tabLabel:this.options.tabLabel})),this.renderFields()},renderFields:function(){var e=this;return i.each(e.$("."+e.options.tabName+"-section-body"),function(s,n){i.each(e.options.sections[n].fields,function(e){t(s).append(e.view.render().el)})}),this}});return a})}.call(this,define||RequireJS.define),RequireJS.define("text!templates/student_account/account_settings.underscore",[],function(){return'<main id="main" aria-label="Content" tabindex="-1">\n<div class="account-settings-container">\n    <div class="wrapper-header">\n        <h2 class="header-title"><%- gettext("Account Settings") %></h2>\n        <div class="left list-inline account-nav" role="tablist">\n            <% _.each(accountSettingsTabs, function(tab) { %>\n                <button id="<%- tab.id %>" aria-controls="<%- tab.name %>-tabpanel" tabindex="<%- tab.tabindex %>" aria-selected="<%- tab.selected %>" aria-expanded="<%- tab.expanded %>" data-name="<%- tab.name %>" aria-describedby="header-subtitle-<%- tab.name %>" class="tab account-nav-link <%- tab.class %>" role="tab">\n                    <%- tab.label %>\n                </button>\n            <% }); %>\n        </div>\n    </div>\n    <div class="account-settings-sections">\n        <% _.each(accountSettingsTabs, function(tab) { %>\n            <div id="<%- tab.name %>-tabpanel" class="account-settings-tabpanels <% if (!tab.class) { %> hidden <% } %>" aria-label="<%- tab.label %>" role="tabpanel"></div>\n        <% }); %>\n    </div>\n</div>\n</main>\n'}),function(e,t){"use strict";RequireJS.define("js/student_account/views/account_settings_view",["gettext","jquery","underscore","common/js/components/views/tabbed_view","edx-ui-toolkit/js/utils/html-utils","js/student_account/views/account_section_view","text!templates/student_account/account_settings.underscore"],function(e,t,i,s,n,a,l){var o=s.extend({navLink:".account-nav-link",activeTab:"aboutTabSections",accountSettingsTabs:[{name:"aboutTabSections",id:"about-tab",label:e("Account Information"),"class":"active",tabindex:0,selected:!0,expanded:!0},{name:"accountsTabSections",id:"accounts-tab",label:e("Linked Accounts"),tabindex:-1,selected:!1,expanded:!1},{name:"ordersTabSections",id:"orders-tab",label:e("Order History"),tabindex:-1,selected:!1,expanded:!1}],events:{"click .account-nav-link":"switchTab","keydown .account-nav-link":"keydownHandler"},initialize:function(e){this.options=e,i.bindAll(this,"render","switchTab","setActiveTab","showLoadingError")},render:function(){var e,t=this;return n.setHtml(this.$el,n.template(l)({accountSettingsTabs:this.accountSettingsTabs})),i.each(t.accountSettingsTabs,function(i){e=i.name,t.renderSection(t.options.tabSections[e],e,i.label)}),this},switchTab:function(e){var s,n=t(".account-nav-link");e&&(e.preventDefault(),s=t(e.target),this.activeTab=s.data("name"),i.each(this.$(".account-settings-tabpanels"),function(e){t(e).addClass("hidden")}),t("#"+this.activeTab+"-tabpanel").removeClass("hidden"),n.attr("tabindex",-1),n.attr("aria-selected",!1),n.attr("aria-expanded",!1),s.attr("tabindex",0),s.attr("aria-selected",!0),s.attr("aria-expanded",!0),t(this.navLink).removeClass("active"),s.addClass("active"))},setActiveTab:function(){this.switchTab()},renderSection:function(e,t,i){var s=new a({tabName:t,tabLabel:i,sections:e,el:"#"+t+"-tabpanel"});s.render()},showLoadingError:function(){this.$(".ui-loading-error").removeClass("is-hidden")}});return o})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/student_account/views/account_settings_factory",["gettext","jquery","underscore","backbone","logger","js/student_account/models/user_account_model","js/student_account/models/user_preferences_model","js/student_account/views/account_settings_fields","js/student_account/views/account_settings_view","edx-ui-toolkit/js/utils/string-utils"],function(e,t,i,s,n,a,l,o,r,d){return function(s,u,c,p,f,h,m,g,b,v){var w,_,x,y,T,V,k,M,S,A,R,C,E,F,O;return w=t(".wrapper-account-settings"),_=new a,_.url=f,x=new l,x.url=h,O=v?{view:new o.EmailFieldView({model:_,title:e("Email Address"),valueAttribute:"email",helpMessage:d.interpolate(e("The email address you use to sign in. Communications from {platform_name} and your courses are sent to this address."),{platform_name:g}),persistChanges:!0})}:{view:new o.ReadonlyFieldView({model:_,title:e("Email Address"),valueAttribute:"email",helpMessage:d.interpolate(e("The email address you use to sign in. Communications from {platform_name} and your courses are sent to this address.  To change the email address, please contact {contact_email}."),{platform_name:g,contact_email:b})})},y=[{title:e("Basic Account Information"),subtitle:e("These settings include basic information about your account. You can also specify additional information and see your linked social accounts on this page."),fields:[{view:new o.ReadonlyFieldView({model:_,title:e("Username"),valueAttribute:"username",helpMessage:d.interpolate(e("The name that identifies you throughout {platform_name}. You cannot change your username."),{platform_name:g})})},{view:new o.TextFieldView({model:_,title:e("Full Name"),valueAttribute:"name",helpMessage:e("The name that is used for ID verification and appears on your certificates. Other learners never see your full name. Make sure to enter your name exactly as it appears on your government-issued photo ID, including any non-Roman characters."),persistChanges:!0})},O,{view:new o.PasswordFieldView({model:_,title:e("Password"),screenReaderTitle:e("Reset Your Password"),valueAttribute:"password",emailAttribute:"email",passwordResetSupportUrl:p,linkTitle:e("Reset Your Password"),linkHref:s.password.url,helpMessage:d.interpolate(e('When you select "Reset Your Password", a message will be sent to the email address for your {platform_name} account. Click the link in the message to reset your password.'),{platform_name:g})})},{view:new o.LanguagePreferenceFieldView({model:x,title:e("Language"),valueAttribute:"pref-lang",required:!0,refreshPageOnSave:!0,helpMessage:d.interpolate(e("The language used throughout this site. This site is currently available in a limited number of languages."),{platform_name:g}),options:s.language.options,persistChanges:!0})},{view:new o.DropdownFieldView({model:_,required:!0,title:e("Country or Region"),valueAttribute:"country",options:s.country.options,persistChanges:!0})},{view:new o.TimeZoneFieldView({model:x,required:!0,title:e("Time Zone"),valueAttribute:"time_zone",helpMessage:e("Select the time zone for displaying course dates. If you do not specify a time zone, course dates, including assignment deadlines, will be displayed in your browser's local time zone."),groupOptions:[{groupTitle:e("All Time Zones"),selectOptions:s.time_zone.options,nullValueOptionLabel:e("Default (Local Time Zone)")}],persistChanges:!0})}]},{title:e("Additional Information"),fields:[{view:new o.DropdownFieldView({model:_,title:e("Education Completed"),valueAttribute:"level_of_education",options:s.level_of_education.options,persistChanges:!0})},{view:new o.DropdownFieldView({model:_,title:e("Gender"),valueAttribute:"gender",options:s.gender.options,persistChanges:!0})},{view:new o.DropdownFieldView({model:_,title:e("Year of Birth"),valueAttribute:"year_of_birth",options:s.year_of_birth.options,persistChanges:!0})},{view:new o.LanguageProficienciesFieldView({model:_,title:e("Preferred Language"),valueAttribute:"language_proficiencies",options:s.preferred_language.options,persistChanges:!0})}]}],R=function(e,t){return i.find(e,function(e){return e.view.options.valueAttribute===t}).view},C=i.find(y,function(t){return t.title===e("Basic Account Information")}).fields,E=R(C,"time_zone"),F=R(C,"country"),E.listenToCountryView(F),T=[{title:e("Linked Accounts"),subtitle:d.interpolate(e("You can link your social media accounts to simplify signing in to {platform_name}."),{platform_name:g}),fields:i.map(c.providers,function(e){return{view:new o.AuthFieldView({title:e.name,valueAttribute:"auth-"+e.id,helpMessage:"",connected:e.connected,connectUrl:e.connect_url,acceptsLogins:e.accepts_logins,disconnectUrl:e.disconnect_url,platformName:g})}})}],u.unshift({title:e("ORDER NAME"),order_date:e("ORDER PLACED"),price:e("TOTAL"),number:e("ORDER NUMBER")}),V=[{title:e("My Orders"),subtitle:d.interpolate(e("This page contains information about orders that you have placed with {platform_name}."),{platform_name:g}),fields:i.map(u,function(e){return A=e.number,"ORDER NUMBER"===A&&(A="orderId"),{view:new o.OrderHistoryFieldView({totalPrice:e.price,orderId:e.number,orderDate:e.order_date,receiptUrl:e.receipt_url,valueAttribute:"order-"+A,lines:e.lines})}})}],k=new r({model:_,accountUserId:m,el:w,tabSections:{aboutTabSections:y,accountsTabSections:T,ordersTabSections:V},userPreferencesModel:x}),k.render(),M=function(){n.log("edx.user.settings.viewed",{page:"account",visibility:null,user_id:m})},S=function(){k.showLoadingError()},_.fetch({success:function(){x.fetch({success:M,error:S})},error:S}),{userAccountModel:_,userPreferencesModel:x,accountSettingsView:k}}})}.call(this,define||RequireJS.define);